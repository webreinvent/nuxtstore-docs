{"_path":"/mobile-app/poc/architecture","_dir":"poc","_draft":false,"_partial":false,"_locale":"","title":"Architecture PoC","description":null,"body":{"type":"root","children":[{"type":"element","tag":"pre","props":{"code":"./lib\n├── data\n│   ├── models\n│   └── services\n├── domain\n│   ├── interfaces\n│   └── repositories\n├── presentation\n│   ├── pages\n│   └── widgets\n└── routes\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"./lib\n├── data\n│   ├── models\n│   └── services\n├── domain\n│   ├── interfaces\n│   └── repositories\n├── presentation\n│   ├── pages\n│   └── widgets\n└── routes\n"}]}]},{"type":"element","tag":"h2","props":{"id":"main-entry-point"},"children":[{"type":"text","value":"Main entry point"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"app_config.dart"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This file is the main entry point of the application. It initializes the DependencyManager and sets up the application's initial configuration, including system UI styles. It then renders a FutureBuilder to handle the asynchronous initialization process of the DependencyManager. Based on the initialization result, it displays a loading screen, an error screen, or the main application."}]},{"type":"element","tag":"pre","props":{"code":"    return FutureBuilder<bool>(\n      future: DependencyManager.init(),\n      builder: (context, snapshot) {\n        if (snapshot.connectionState == ConnectionState.waiting) {\n          return const _DefaultAppConfig(\n            child: _SplashScreen(),\n          );\n        } else if (snapshot.hasError) {\n          return const _DefaultAppConfig(\n            child: _HardRestartScreen(),\n          );\n        } else if (snapshot.hasData) {\n          return _AppConfigImpl(\n            env: env,\n          );\n        } else {\n          return const _DefaultAppConfig(\n            child: _SomethingWentWrongScreen(),\n          );\n        }\n      },\n    );\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return FutureBuilder<bool>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      future: DependencyManager.init(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      builder: (context, snapshot) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        if (snapshot.connectionState == ConnectionState.waiting) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return const _DefaultAppConfig(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            child: _SplashScreen(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        } else if (snapshot.hasError) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return const _DefaultAppConfig(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            child: _HardRestartScreen(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        } else if (snapshot.hasData) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return _AppConfigImpl(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            env: env,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return const _DefaultAppConfig(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            child: _SomethingWentWrongScreen(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"dependency-manager"},"children":[{"type":"text","value":"Dependency Manager"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"the DependencyManager acts as a central hub for managing application-wide dependencies."}]},{"type":"element","tag":"h3","props":{"id":"key-points"},"children":[{"type":"text","value":"Key Points"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Focus on Repositories\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The DependencyManager primarily initializes and exposes repositories. Repositories encapsulate data access logic, often combining data from multiple services."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For instance, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" combines data from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"StorageService"}]},{"type":"text","value":". This separation of concerns promotes cleaner code and easier testing."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BLoCs and Repositories\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BLoCs, which manage application state and logic, can leverage the DependencyManager to access the required repositories."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For instance, an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationBloc"}]},{"type":"text","value":" might depend on the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":"."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Modular Design\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This approach promotes modularity by isolating dependency creation logic within the DependencyManager. BLoCs and other components don't need to be aware of how their dependencies are created, making the code more maintainable and testable."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Singleton Pattern\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The DependencyManager utilizes the Singleton pattern to ensure only one instance exists throughout the application's lifetime. This guarantees consistent access to the initialized dependencies."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"issues-with-this-approach"},"children":[{"type":"text","value":"Issues with this Approach"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Circular Dependency Issue\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It's something when first thing depends on second and second depends on first, creating a deadlock."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Solution to this I explain later "},{"type":"element","tag":"a","props":{"href":"#circular-dependency"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"    final vaahApiService = ApiService(\n      interceptors: [\n        ApiTokenInterceptor(() => authenticationRepository),\n      ],\n    );\n\n    final authenticationService = AuthenticationService.vaah(\n      apiService: vaahApiService,\n    );\n\n    authenticationRepository = AuthenticationRepository(\n      authenticationService: authenticationService,\n    );\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final vaahApiService = ApiService(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      interceptors: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ApiTokenInterceptor(() => authenticationRepository),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final authenticationService = AuthenticationService.vaah(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      apiService: vaahApiService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    authenticationRepository = AuthenticationRepository(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      authenticationService: authenticationService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"init"}]},{"type":"text","value":" Method\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This asynchronous method initializes the essential services & repositories"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For instance, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"authenticationRepository"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"DependencyManager Creates the core "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"instance"}]},{"type":"text","value":", injecting both "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"secureStorageService"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"authenticationService"}]},{"type":"text","value":". And Let's say some other repository depends on secureStorageService we do not need to create a new one, we can utilize existing one."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Exposing variables\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To expose you need to create direct variable in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyManager"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"static late final"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For instance, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"static late final AuthenticationRepository authenticationRepository;"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dependency_manager.dart"}]}]},{"type":"element","tag":"pre","props":{"code":"/// DependencyManager: Singleton Class\nabstract class DependencyManager {\n  static bool _isInitialized = false;\n\n  static late final AuthenticationRepository authenticationRepository;\n\n  static Future<bool> init() async {\n    if (_isInitialized) {\n      return true;\n    }\n\n    final secureStorageService = StorageService.secure();\n\n    final vaahApiService = ApiService(\n      interceptors: [\n        ApiTokenInterceptor(() => authenticationRepository),\n      ],\n    )..addSerializerFunctions(VaahResponseSerializers.defaults());\n\n    final authenticationService = AuthenticationService.vaah(\n      apiService: vaahApiService,\n    );\n\n    authenticationRepository = AuthenticationRepository(\n      storageService: secureStorageService,\n      authenticationService: authenticationService,\n    );\n    await authenticationRepository.init();\n\n    _isInitialized = true;\n    return _isInitialized;\n  }\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/// DependencyManager: Singleton Class\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"abstract class DependencyManager {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  static bool _isInitialized = false;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  static late final AuthenticationRepository authenticationRepository;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  static Future<bool> init() async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (_isInitialized) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return true;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final secureStorageService = StorageService.secure();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final vaahApiService = ApiService(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      interceptors: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ApiTokenInterceptor(() => authenticationRepository),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    )..addSerializerFunctions(VaahResponseSerializers.defaults());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final authenticationService = AuthenticationService.vaah(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      apiService: vaahApiService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    authenticationRepository = AuthenticationRepository(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      storageService: secureStorageService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      authenticationService: authenticationService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await authenticationRepository.init();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _isInitialized = true;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return _isInitialized;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"pre","props":{"code":"    return MultiBlocProvider(\n      providers: [\n        BlocProvider<AuthenticationBloc>(\n          create: (context) => AuthenticationBloc(\n            authenticationRepository: DependencyManager.authenticationRepository,\n          )..add(const InitializationRequested()),\n        ),\n        ...\n      ],\n      child: child,\n    );\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return MultiBlocProvider(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      providers: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        BlocProvider<AuthenticationBloc>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          create: (context) => AuthenticationBloc(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            authenticationRepository: DependencyManager.authenticationRepository,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          )..add(const InitializationRequested()),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      child: child,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"services"},"children":[{"type":"text","value":"Services"}]},{"type":"element","tag":"h3","props":{"id":"key-points-1"},"children":[{"type":"text","value":"Key Points"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Benefits of Layered Architecture for Services"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Abstract Interfaces\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"By defining abstract interfaces for your services, you create a clear contract that all concrete implementations must adhere to. This promotes flexibility as you can easily swap out different implementations without affecting the rest of your application. For example this is so useful when you need to feature flag some features."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Improved Testability\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Abstract interfaces enable you to easily mock or stub service implementations during unit tests. This allows you to isolate the logic of your application components from the specific behavior of external services, making your tests more robust and easier to maintain"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Separation of Concerns\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"this architecture promotes a clean separation of concerns. Services are responsible for specific functionalities, while other components interact with them through well-defined interfaces. This reduces coupling and improves code maintainability."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Enhanced Maintainability\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"By clearly defining service interfaces and their responsibilities, you make it easier to understand and maintain your application's architecture. Changes to service implementations can be made with minimal impact on other parts of the application as long as the interface remains unchanged."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Future-Proofing\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The layered architecture provides a solid foundation for future enhancements. You can easily add new service implementations or modify existing ones without significantly impacting the rest of your application."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-1"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This code defines a layered approach for local storage in a Flutter application\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"StorageService"}]},{"type":"text","value":" is an abstract interface defining methods for get, set, and remove data."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"StorageServiceNoOp"}]},{"type":"text","value":" is a no-op implementation for testing purposes."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SecureStorageService"}]},{"type":"text","value":" in an implementation using flutter_secure_storage for secure data storage."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"// lib/data/services/local_storage/storage_service.dart\nabstract class StorageService {\n  const StorageService();\n\n  factory StorageService.noOp() => const StorageServiceNoOp();\n\n  factory StorageService.secure() => const SecureStorageService();\n\n  Future<T?> get<T>({required String key});\n\n  Future<void> set({required String key, required Object value});\n\n  Future<void> remove({required String key});\n}\n\n\n// lib/data/services/local_storage/no_op_service.dart\nclass StorageServiceNoOp implements StorageService {\n  const StorageServiceNoOp();\n\n  @override\n  Future<T?> get<T>({required String key}) async => null;\n\n  @override\n  Future<void> set({required String key, required Object value}) async => null;\n\n  @override\n  Future<void> remove({required String key}) async => null;\n}\n\n\n// lib/data/services/local_storage/secure_storage_service.dart\nclass SecureStorageService implements StorageService {\n  const SecureStorageService({this.storage = const FlutterSecureStorage()});\n\n  final FlutterSecureStorage storage;\n\n  @override\n  Future<T?> get<T>({required String key}) async {\n    final match = await storage.read(key: key);\n    if (match == null) return null;\n    return jsonDecode(match) as T;\n  }\n\n  @override\n  Future<void> set({required String key, required Object value}) async {\n    await storage.write(key: key, value: jsonEncode(value));\n  }\n\n  @override\n  Future<void> remove({required String key}) async {\n    await storage.delete(key: key);\n  }\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// lib/data/services/local_storage/storage_service.dart\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"abstract class StorageService {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const StorageService();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  factory StorageService.noOp() => const StorageServiceNoOp();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  factory StorageService.secure() => const SecureStorageService();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<T?> get<T>({required String key});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> set({required String key, required Object value});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> remove({required String key});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// lib/data/services/local_storage/no_op_service.dart\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"class StorageServiceNoOp implements StorageService {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const StorageServiceNoOp();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<T?> get<T>({required String key}) async => null;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> set({required String key, required Object value}) async => null;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> remove({required String key}) async => null;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// lib/data/services/local_storage/secure_storage_service.dart\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"class SecureStorageService implements StorageService {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const SecureStorageService({this.storage = const FlutterSecureStorage()});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final FlutterSecureStorage storage;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<T?> get<T>({required String key}) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final match = await storage.read(key: key);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (match == null) return null;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return jsonDecode(match) as T;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> set({required String key, required Object value}) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await storage.write(key: key, value: jsonEncode(value));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> remove({required String key}) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await storage.delete(key: key);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"usage-1"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"pre","props":{"code":"final secureStorageService = StorageService.secure();\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final secureStorageService = StorageService.secure();\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"repositories"},"children":[{"type":"text","value":"Repositories"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Centralizing Data Access Logic"}]},{"type":"element","tag":"h3","props":{"id":"key-points-2"},"children":[{"type":"text","value":"Key points"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Source of Truth\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Repositories act as a single source of truth for accessing and managing data within your application's domain layer."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"They encapsulate the logic for fetching, storing, and manipulating data, often combining data from multiple services."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Separation of Concerns\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Repositories shield the rest of your application (BLoCs, UI components) from the complexities of dealing with different data sources and services directly"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Repositories promote a clean separation of concerns by isolating data access logic from the presentation layer (Blocs, UI). This improves code maintainability and testability."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Data Transformation and Validation\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Repositories can handle data transformation and validation before exposing it to other layers."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-2"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authentication States\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Defines three states: unknown (initial), authenticated (user logged in), and unauthenticated (user logged out)."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"AuthenticationRepository\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Handles user authentication logic."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Stores the currently logged-in user."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provides a stream ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"statusStream"}]},{"type":"text","value":") to notify about authentication state changes."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Uses "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"storageService"}]},{"type":"text","value":" to store/retrieve user data securely."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Uses "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"authenticationService"}]},{"type":"text","value":" to perform signup, signin, and signout operations."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"enum AuthenticationStatus {\n  unknown,\n  authenticated,\n  unauthenticated,\n}\n\nextension AuthenticationStatusExtensions on AuthenticationStatus {\n  bool get isAuthenticated => this == AuthenticationStatus.authenticated;\n}\n\nconst String _userKey = 'secure_user';\n\nclass AuthenticationRepository implements DisposableRepository {\n  AuthenticationRepository({\n    required this.storageService,\n    required this.authenticationService,\n  });\n\n  final StorageService storageService;\n  final AuthenticationService authenticationService;\n\n  @override\n  Future<void> init() async {\n    try {\n      final decodedUser = await storageService.get<Map<String, dynamic>>(\n        key: _userKey,\n      );\n      if (decodedUser == null) {\n        _unsetUser();\n      } else {\n        final user = User.fromJson(decodedUser);\n        _setUser(user);\n      }\n    } catch (e) {\n      _unsetUser();\n    }\n  }\n\n  @override\n  Future<void> dispose() async {\n    _statusController.close();\n  }\n\n  final BehaviorSubject<AuthenticationStatus> _statusController =\n      BehaviorSubject<AuthenticationStatus>.seeded(AuthenticationStatus.unknown);\n\n  Stream<AuthenticationStatus> get statusStream {\n    return _statusController.stream;\n  }\n\n  AuthenticationStatus get statusCurrent {\n    return _statusController.value;\n  }\n\n  User? _user;\n\n  User? get user => _user;\n\n  void _unsetUser() {\n    _user = null;\n    _statusController.add(AuthenticationStatus.unauthenticated);\n  }\n\n  void _setUser(User user) {\n    _user = user;\n    _statusController.add(AuthenticationStatus.authenticated);\n  }\n\n  Future<User> signUp({\n    required String email,\n    required String name,\n    required String username,\n    required String password,\n  }) async {\n    final authenticatedUser = await authenticationService.signUp(\n      email: email,\n      name: name,\n      username: username,\n      password: password,\n    );\n    await storageService.set(\n      key: _userKey,\n      value: authenticatedUser.toJson(),\n    );\n\n    _setUser(authenticatedUser);\n    return authenticatedUser;\n  }\n\n  Future<User> signIn({\n    required String username,\n    required String password,\n  }) async {\n    final authenticatedUser = await authenticationService.signIn(\n      username: username,\n      password: password,\n    );\n    await storageService.set(\n      key: _userKey,\n      value: authenticatedUser.toJson(),\n    );\n\n    _setUser(authenticatedUser);\n    return authenticatedUser;\n  }\n\n  Future<void> signOut() async {\n    await authenticationService.signOut();\n    await storageService.remove(\n      key: _userKey,\n    );\n\n    _unsetUser();\n  }\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"enum AuthenticationStatus {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  unknown,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  authenticated,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  unauthenticated,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"extension AuthenticationStatusExtensions on AuthenticationStatus {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  bool get isAuthenticated => this == AuthenticationStatus.authenticated;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const String _userKey = 'secure_user';\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"class AuthenticationRepository implements DisposableRepository {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  AuthenticationRepository({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.storageService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.authenticationService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final StorageService storageService;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final AuthenticationService authenticationService;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> init() async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      final decodedUser = await storageService.get<Map<String, dynamic>>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        key: _userKey,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (decodedUser == null) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        _unsetUser();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        final user = User.fromJson(decodedUser);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        _setUser(user);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } catch (e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      _unsetUser();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  @override\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> dispose() async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _statusController.close();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final BehaviorSubject<AuthenticationStatus> _statusController =\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      BehaviorSubject<AuthenticationStatus>.seeded(AuthenticationStatus.unknown);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Stream<AuthenticationStatus> get statusStream {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return _statusController.stream;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  AuthenticationStatus get statusCurrent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return _statusController.value;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  User? _user;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  User? get user => _user;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  void _unsetUser() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _user = null;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _statusController.add(AuthenticationStatus.unauthenticated);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  void _setUser(User user) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _user = user;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _statusController.add(AuthenticationStatus.authenticated);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<User> signUp({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String email,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String name,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final authenticatedUser = await authenticationService.signUp(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      email: email,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      name: name,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      username: username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      password: password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await storageService.set(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      key: _userKey,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      value: authenticatedUser.toJson(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _setUser(authenticatedUser);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return authenticatedUser;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<User> signIn({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required String password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final authenticatedUser = await authenticationService.signIn(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      username: username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      password: password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await storageService.set(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      key: _userKey,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      value: authenticatedUser.toJson(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _setUser(authenticatedUser);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return authenticatedUser;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> signOut() async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await authenticationService.signOut();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    await storageService.remove(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      key: _userKey,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    _unsetUser();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"bloc"},"children":[{"type":"text","value":"BLoC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As discussed, only repositories are accessible from dependency manager, no services are exposed, BLoC can depend multiple repositories in order to operate."}]},{"type":"element","tag":"h3","props":{"id":"key-points-3"},"children":[{"type":"text","value":"Key Points"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What does it do?\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Manages the state of the application. Handles events."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Interacts with Repository(s) to perform operations."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Emits a stream of State objects to notify the UI about changes."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Improved Code Organization\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Separates business logic from the UI, making the code more modular and easier to understand."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Enhanced Testability\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Allows you to easily test the BLoC's behavior in isolation."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Improved Maintainability\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Makes it easier to modify and extend the application's logic without affecting other parts of the codebase."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Enhanced User Experience\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provides a more predictable and responsive user interface by managing state changes effectively."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"best-practices"},"children":[{"type":"text","value":"Best Practices"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use descriptive and meaningful names for classes, events, states, and methods."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Follow consistent naming conventions throughout your project for better readability and maintainability."}]}]},{"type":"element","tag":"h4","props":{"id":"events"},"children":[{"type":"text","value":"Events"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Descriptive action verbs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use action verbs that clearly describe the intent of the event"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Avoid generic names like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ButtonClicked"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DataUpdated"}]}]}]},{"type":"element","tag":"h4","props":{"id":"states"},"children":[{"type":"text","value":"States"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Descriptive adjectives"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use adjectives to describe the current state of the system."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Avoid vague names like StateA, StateB."}]}]},{"type":"element","tag":"h4","props":{"id":"bloc-1"},"children":[{"type":"text","value":"BLoC"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Class Name\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Follow the convention of using \"Bloc\" as a suffix for Bloc classes."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"name should clearly indicate what the Bloc is responsible for."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Event Handler Method Names\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use the prefix "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_on"}]},{"type":"text","value":" followed by the corresponding event name."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This convention is commonly used in Bloc implementations to clearly identify event handlers."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"on<InitializationRequested>(_onInitializationRequested);"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-3"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lib/features/authentication/bloc/authentication_bloc.dart"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Extends Bloc and manages authentication state based on events."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The AuthenticationBloc constructor injects an AuthenticationRepository for interacting with authentication logic."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Event handlers ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_on*Requested"}]},{"type":"text","value":") handle specific events\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_onInitializationRequested"}]},{"type":"text","value":": Checks the initial authentication state and emits AuthenticationSuccessful if a user is logged in, otherwise stays in the initial state."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_onSignUpRequested"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_onSignInRequested"}]},{"type":"text","value":": Handle signup and signin requests respectively, interacting with the repository and emitting loading/success/failure states."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_onSignOutRequested"}]},{"type":"text","value":": Handles user signout, interacting with the repository and emitting loading/success/failure states."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"class AuthenticationBloc extends Bloc<AuthenticationEvent, AuthenticationState> {\n  AuthenticationBloc({\n    required this.authenticationRepository,\n  }) : super(const AuthenticationInitial()) {\n    on<InitializationRequested>(_onInitializationRequested);\n    on<SignUpRequested>(_onSignUpRequested);\n    on<SignInRequested>(_onSignInRequested);\n    on<SignOutRequested>(_onSignOutRequested);\n  }\n\n  final AuthenticationRepository authenticationRepository;\n\n  void _onInitializationRequested(\n    InitializationRequested event,\n    Emitter<AuthenticationState> emit,\n  ) {\n    if (authenticationRepository.statusCurrent.isAuthenticated &&\n        authenticationRepository.user != null) {\n      emit(AuthenticationSuccessful(user: authenticationRepository.user!));\n    }\n  }\n\n  Future<void> _onSignUpRequested(\n    SignUpRequested event,\n    Emitter<AuthenticationState> emit,\n  ) async {\n    try {\n      emit(const AuthenticationLoading());\n      final user = await authenticationRepository.signUp(\n        email: event.email,\n        name: event.name,\n        username: event.username,\n        password: event.password,\n      );\n      emit(AuthenticationSuccessful(user: user));\n    } catch (e, st) {\n      Log.exception(e, stackTrace: st, hint: 'user-signup-failed');\n      emit(const AuthenticationFailed(\n        message: VaahStringConstants.somethingWentWrong,\n      ));\n    }\n  }\n\n  Future<void> _onSignInRequested(\n    SignInRequested event,\n    Emitter<AuthenticationState> emit,\n  ) async {\n    try {\n      emit(const AuthenticationLoading());\n      final user = await authenticationRepository.signIn(\n        username: event.username,\n        password: event.password,\n      );\n      emit(AuthenticationSuccessful(user: user));\n    } catch (e, st) {\n      Log.exception(e, stackTrace: st, hint: 'user-signin-failed');\n      emit(const AuthenticationFailed(\n        message: VaahStringConstants.somethingWentWrong,\n      ));\n    }\n  }\n\n  Future<void> _onSignOutRequested(\n    SignOutRequested event,\n    Emitter<AuthenticationState> emit,\n  ) async {\n    try {\n      emit(const AuthenticationLoading());\n      await authenticationRepository.signOut();\n      emit(const AuthenticationChanged(message: StringConstants.signedOutSuccessfully));\n    } catch (e, st) {\n      Log.exception(e, stackTrace: st, hint: 'user-signout-failed');\n      emit(const AuthenticationFailed(\n        message: VaahStringConstants.somethingWentWrong,\n      ));\n    }\n  }\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"class AuthenticationBloc extends Bloc<AuthenticationEvent, AuthenticationState> {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  AuthenticationBloc({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.authenticationRepository,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }) : super(const AuthenticationInitial()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    on<InitializationRequested>(_onInitializationRequested);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    on<SignUpRequested>(_onSignUpRequested);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    on<SignInRequested>(_onSignInRequested);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    on<SignOutRequested>(_onSignOutRequested);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final AuthenticationRepository authenticationRepository;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  void _onInitializationRequested(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    InitializationRequested event,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    Emitter<AuthenticationState> emit,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (authenticationRepository.statusCurrent.isAuthenticated &&\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        authenticationRepository.user != null) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(AuthenticationSuccessful(user: authenticationRepository.user!));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> _onSignUpRequested(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    SignUpRequested event,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    Emitter<AuthenticationState> emit,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  ) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationLoading());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      final user = await authenticationRepository.signUp(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        email: event.email,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        name: event.name,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        username: event.username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        password: event.password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(AuthenticationSuccessful(user: user));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } catch (e, st) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      Log.exception(e, stackTrace: st, hint: 'user-signup-failed');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationFailed(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        message: VaahStringConstants.somethingWentWrong,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> _onSignInRequested(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    SignInRequested event,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    Emitter<AuthenticationState> emit,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  ) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationLoading());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      final user = await authenticationRepository.signIn(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        username: event.username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        password: event.password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(AuthenticationSuccessful(user: user));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } catch (e, st) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      Log.exception(e, stackTrace: st, hint: 'user-signin-failed');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationFailed(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        message: VaahStringConstants.somethingWentWrong,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Future<void> _onSignOutRequested(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    SignOutRequested event,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    Emitter<AuthenticationState> emit,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  ) async {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationLoading());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      await authenticationRepository.signOut();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationChanged(message: StringConstants.signedOutSuccessfully));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } catch (e, st) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      Log.exception(e, stackTrace: st, hint: 'user-signout-failed');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      emit(const AuthenticationFailed(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        message: VaahStringConstants.somethingWentWrong,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lib/features/authentication/bloc/authentication_event.dart"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"AuthenticationEvent: Sealed class representing events that trigger state changes"}]}]},{"type":"element","tag":"pre","props":{"code":"@immutable\nsealed class AuthenticationEvent {\n  const AuthenticationEvent();\n}\n\nfinal class InitializationRequested extends AuthenticationEvent {\n  const InitializationRequested();\n}\n\nfinal class SignUpRequested extends AuthenticationEvent {\n  const SignUpRequested({\n    required this.email,\n    required this.name,\n    required this.username,\n    required this.password,\n  });\n\n  final String email;\n  final String name;\n  final String username;\n  final String password;\n}\n\nfinal class SignInRequested extends AuthenticationEvent {\n  const SignInRequested({\n    required this.username,\n    required this.password,\n  });\n\n  final String username;\n  final String password;\n}\n\nfinal class SignOutRequested extends AuthenticationEvent {\n  const SignOutRequested();\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"@immutable\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"sealed class AuthenticationEvent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationEvent();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class InitializationRequested extends AuthenticationEvent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const InitializationRequested();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class SignUpRequested extends AuthenticationEvent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const SignUpRequested({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.email,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.name,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String email;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String name;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String username;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String password;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class SignInRequested extends AuthenticationEvent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const SignInRequested({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.username,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.password,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String username;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String password;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class SignOutRequested extends AuthenticationEvent {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const SignOutRequested();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lib/features/authentication/bloc/authentication_state.dart"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"AuthenticationState: Sealed class representing different states of authentication."}]}]},{"type":"element","tag":"pre","props":{"code":"@immutable\nsealed class AuthenticationState {\n  const AuthenticationState();\n}\n\nfinal class AuthenticationInitial extends AuthenticationState {\n  const AuthenticationInitial();\n}\n\nfinal class AuthenticationLoading extends AuthenticationState {\n  const AuthenticationLoading();\n}\n\nfinal class AuthenticationSuccessful extends AuthenticationState {\n  const AuthenticationSuccessful({\n    required this.user,\n  });\n\n  final User user;\n}\n\nfinal class AuthenticationChanged extends AuthenticationState {\n  const AuthenticationChanged({\n    required this.message,\n  });\n\n  final String message;\n}\n\nfinal class AuthenticationFailed extends AuthenticationState {\n  const AuthenticationFailed({\n    required this.message,\n  });\n\n  final String message;\n}\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"@immutable\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"sealed class AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationState();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class AuthenticationInitial extends AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationInitial();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class AuthenticationLoading extends AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationLoading();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class AuthenticationSuccessful extends AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationSuccessful({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.user,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final User user;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class AuthenticationChanged extends AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationChanged({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.message,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String message;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"final class AuthenticationFailed extends AuthenticationState {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  const AuthenticationFailed({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    required this.message,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  final String message;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"usage-2"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On somewhere core level we initialize this bloc because it is used application wide, otherwise for other blocs for one screen only we can initialize for that screen only"}]},{"type":"element","tag":"pre","props":{"code":"    MultiBlocProvider(\n      providers: [\n        BlocProvider<AuthenticationBloc>(\n          create: (BuildContext context) => AuthenticationBloc(\n            authenticationRepository: DependencyManager.authenticationRepository,\n          )..add(const InitializationRequested()),\n        ),\n      ],\n      child: ... ,\n    )\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    MultiBlocProvider(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      providers: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        BlocProvider<AuthenticationBloc>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          create: (BuildContext context) => AuthenticationBloc(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            authenticationRepository: DependencyManager.authenticationRepository,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          )..add(const InitializationRequested()),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      child: ... ,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    )\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BlocBuilder\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Primarily used to build UI based on the current state of a Bloc."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"BlocBuilder<AuthenticationBloc, AuthenticationState>(\n  builder: (context, state) {\n    if (state is AuthenticationLoading) {\n      return const CircularProgressIndicator();\n    } else if (state is AuthenticationSuccessful) {\n      return Text('Authentication Successful');\n    } else if (state is AuthenticationFailed) {\n      return Text('Authentication Failed');\n    } else {\n      return Text('Not authenticated');\n    }\n  },\n)\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"BlocBuilder<AuthenticationBloc, AuthenticationState>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  builder: (context, state) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (state is AuthenticationLoading) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return const CircularProgressIndicator();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else if (state is AuthenticationSuccessful) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Authentication Successful');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else if (state is AuthenticationFailed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Authentication Failed');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Not authenticated');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BlocListener\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Primarily used to perform side effects in response to state changes within a Bloc."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"BlocListener<AuthenticationBloc, AuthenticationState>(\n  listener: (context, state) {\n    if (state is AuthenticationFailed) {\n      ScaffoldMessenger.of(context).showSnackBar(\n        SnackBar(content: Text(state.message)),\n      );\n    }\n  },\n  child: // Your UI here,\n)\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"BlocListener<AuthenticationBloc, AuthenticationState>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  listener: (context, state) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (state is AuthenticationFailed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ScaffoldMessenger.of(context).showSnackBar(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        SnackBar(content: Text(state.message)),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  child: // Your UI here,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BlocConsumer\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Combines the functionality of both BlocListener and BlocBuilder."}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"BlocConsumer<AuthenticationBloc, AuthenticationState>(\n  listener: (context, state) {\n    if (state is AuthenticationFailed) {\n      ScaffoldMessenger.of(context).showSnackBar(\n        SnackBar(content: Text(state.message)),\n      );\n    }\n  },\n  builder: (context, state) {\n    if (state is AuthenticationLoading) {\n      return const CircularProgressIndicator();\n    } else if (state is AuthenticationSuccessful) {\n      return Text('Authentication Successful');\n    } else if (state is AuthenticationFailed) {\n      return Text('Authentication Failed');\n    } else {\n      return Text('Not authenticated');\n    }\n  },\n)\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"BlocConsumer<AuthenticationBloc, AuthenticationState>(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  listener: (context, state) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (state is AuthenticationFailed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ScaffoldMessenger.of(context).showSnackBar(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        SnackBar(content: Text(state.message)),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  builder: (context, state) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (state is AuthenticationLoading) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return const CircularProgressIndicator();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else if (state is AuthenticationSuccessful) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Authentication Successful');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else if (state is AuthenticationFailed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Authentication Failed');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return Text('Not authenticated');\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"circular-dependency"},"children":[{"type":"text","value":"Circular Dependency"}]},{"type":"element","tag":"h3","props":{"id":"the-problem"},"children":[{"type":"text","value":"The problem"}]},{"type":"element","tag":"pre","props":{"code":"    final vaahApiService = ApiService(\n      interceptors: [\n        ApiTokenInterceptor(() => authenticationRepository),\n      ],\n    );\n\n    final authenticationService = AuthenticationService.vaah(\n      apiService: vaahApiService,\n    );\n\n    authenticationRepository = AuthenticationRepository(\n      authenticationService: authenticationService,\n    );\n","language":"dart","meta":"","className":"language-dart shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final vaahApiService = ApiService(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      interceptors: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ApiTokenInterceptor(() => authenticationRepository),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    final authenticationService = AuthenticationService.vaah(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      apiService: vaahApiService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    authenticationRepository = AuthenticationRepository(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      authenticationService: authenticationService,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    );\n"}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiTokenInterceptor"}]},{"type":"text","value":" needs "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" to retrieve the user's securely locally stored API token."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" depends on "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationService"}]},{"type":"text","value":" for authentication logic."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationService"}]},{"type":"text","value":" relies on "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" to make API calls."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" needs "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiTokenInterceptor"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"the-solution"},"children":[{"type":"text","value":"The solution"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" is created with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiTokenInterceptor"}]},{"type":"text","value":". However, the interceptor uses a lambda function ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"() => authenticationRepository"}]},{"type":"text","value":") to delay retrieving the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" instance."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationService"}]},{"type":"text","value":" is created immediately after "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" using the already created "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Finally, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" is created immediately after "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationService"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"One more thing to note here: We need to initialize services and repo in this perticular order (We can not initialize anything between given initializations). We always first initialize "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":", then "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationService"}]},{"type":"text","value":", and then "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AuthenticationRepository"}]},{"type":"text","value":" -- "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Immediately"}]},{"type":"text","value":" one after another just to ensure that no other service that depends on "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiService"}]},{"type":"text","value":" makes any request inbetween."}]}]},{"type":"element","tag":"h3","props":{"id":"the-lambda-function"},"children":[{"type":"text","value":"The lambda function"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The lambda function "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"() => authenticationRepository"}]},{"type":"text","value":" is used within the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApiTokenInterceptor"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This function delays the retrieval of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"authenticationRepository"}]},{"type":"text","value":" until it's actually needed."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"By the time the interceptor needs the repository during an API call, init would have already completed creating all the services and the repositories. And thus needed repository instance would be available by that time."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"main-entry-point","depth":2,"text":"Main entry point"},{"id":"dependency-manager","depth":2,"text":"Dependency Manager","children":[{"id":"key-points","depth":3,"text":"Key Points"},{"id":"issues-with-this-approach","depth":3,"text":"Issues with this Approach"},{"id":"example","depth":3,"text":"Example"},{"id":"usage","depth":3,"text":"Usage"}]},{"id":"services","depth":2,"text":"Services","children":[{"id":"key-points-1","depth":3,"text":"Key Points"},{"id":"example-1","depth":3,"text":"Example"},{"id":"usage-1","depth":3,"text":"Usage"}]},{"id":"repositories","depth":2,"text":"Repositories","children":[{"id":"key-points-2","depth":3,"text":"Key points"},{"id":"example-2","depth":3,"text":"Example"}]},{"id":"bloc","depth":2,"text":"BLoC","children":[{"id":"key-points-3","depth":3,"text":"Key Points"},{"id":"best-practices","depth":3,"text":"Best Practices"},{"id":"example-3","depth":3,"text":"Example"},{"id":"usage-2","depth":3,"text":"Usage"}]},{"id":"circular-dependency","depth":2,"text":"Circular Dependency","children":[{"id":"the-problem","depth":3,"text":"The problem"},{"id":"the-solution","depth":3,"text":"The solution"},{"id":"the-lambda-function","depth":3,"text":"The lambda function"}]}]}},"_type":"markdown","_id":"content:2.mobile-app:3.poc:2.architecture.md","_source":"content","_file":"2.mobile-app/3.poc/2.architecture.md","_stem":"2.mobile-app/3.poc/2.architecture","_extension":"md"}